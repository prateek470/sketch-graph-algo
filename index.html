 <html>
	<head>
		<title>PaperJS - Starter Canvas</title>
		<!-- An AMD-loader like RequireJS is necessary for srlib's asynchronous modules -->
		<script src="js/require.js"></script>
		<!-- Load srlib following RequireJS -->
		<script src="js/srlib.js"></script>	
		<!--Paper JS-->
		<script src="js/paper-full.js"></script>
		<!--Fonts and styling-->
		<link href="css/style.css" rel='stylesheet' type='text/css'/>
   
		<script type="text/javascript" src="js/model.js"></script>
		<script type="text/javascript" src="js/rubine.js"></script>
		<script type="text/javascript" src="js/util.js"></script>

		<script type="text/javascript">
		window.onload = function(){
			fig = new Figure()
			reRunFlag = false
		}
		</script>

	</head>
	<body>	
	<script type="text/paperscript" canvas="canvas">
			
					
	function onMouseDown(event) {
		// PaperJS add a new Path object and initial starting point
		path = new Path();
		path.strokeColor = 'black';
		path.strokeWidth = 2;
		path.add(event.point);
		
		// SRLlib add a new Stroke object and initial starting point
		stroke = new srlib.core.data.container.Stroke();
		point = new srlib.core.data.container.Point(event.point.x,event.point.y)
		if (typeof sketch == "undefined") {
			sketch = new srlib.core.data.container.Sketch();
		}
		sketch.addStroke(stroke);
		sketch.addPoint(point);
		stroke.addPoint(point);
	}

	function onMouseDrag(event) {
	// PaperJS add points to Path object on mouse drag
	path.add(event.point);

	// SRLlib add points to Stroke on mouse drag
	point = new srlib.core.data.container.Point(event.point.x,event.point.y)
	sketch.addPoint(point);
	stroke.addPoint(point);
	}




	function onMouseUp(event) {	
	
	// Add evaluation / recognition functions or whatever you want here!
	var points = stroke.getPoints();
	<!-- Circle -->
 	if(isCircle(points,path)){ 
		var BB = new srlib.core.data.container.BoundingBox(stroke);
		var center = new Point( ((BB.getMaxX() + BB.getMinX()  )/2  ) ,( ( BB.getMaxY() + BB.getMinY() )/2 ) )
		var myCircle = new Path.Circle(center, 30);
		myCircle.strokeColor = 'red';
		path.visible = false;

		<!-- Update model -->
		var node  = new Node(fig.getNodes.length)
		node.setCenter = new srlib.core.data.container.Point(center.x,center.y)
		node.path = myCircle
		node.original = path

		var text = new PointText(center);
		text.fillColor = 'black';
		text.fontSize = 15
		text.justification = 'center'
		node.setName = 	String.fromCharCode('A'.charCodeAt() + node.getId)
		text.content = node.getName
		fig.addNode(node)

		var select = document.getElementById("startnodes")
        var option = document.createElement('option')
        option.text = node.getName
        option.value = node.getId
        select.add(option)
    	

	}
	<!-- Line -->
	else if(isLine(points)){
		var myLine = new Path.Line(points[0],points[points.length-1])
		myLine.strokeColor = 'blue';
		path.visible = false;

		<!-- Update model -->
		var edge = new Edge(fig.getUndirected.length)
		edge.endpoints = []
		edge.endpoints.push(points[0])
		edge.endpoints.push(points[points.length-1])
		edge.path = myLine
		edge.original = path
		fig.addUndirected(edge)

		<!-- Edge weight -->
		var center = new Point ((points[0].getX()+points[points.length-1].getX())/2, (points[0].getY()+points[points.length-1].getY())/2)
		var text = new PointText(center);
		text.data.edgeId = edge.getId
		text.fillColor = 'black';
		text.fontSize = 15
		text.justification = 'left'
		text.content = 0
		text.onClick = function(){
			var box = document.createElement('input'); // creates the element
			box.id = this.data.edgeId
			box.style.position = 'absolute';  // position it
			box.style.left = center.x;
			box.style.top = center.y;  
			box.style.width = 25
			box.oninput = function(){
				fig.getUndirected[this.id].setValue = parseInt(this.value)
				text.content = fig.getUndirected[this.id].getValue
			}
			box.onkeyup = function(e){
				if (e.keyCode == 13){
					document.body.removeChild(box)
					console.log(fig.getUndirected)
				}
			}
			document.body.appendChild(box)
			box.focus()
		}
	}
	<!-- Not recognized -->
	else{
		path.removeSegments()
	}
	}




	</script>	
	
	<canvas id="canvas" rezise="true"  style="position:fixed;top:0px;left:0px;width:80%;border:1px solid #d3d3d3"></canvas>
	
	<div style="position:fixed;top:20px;right:50px"> 
		<b>Select start node :</b> <select id="startnodes" name="startnodes"></select>
		<br/><br/><br/>
		<input id="recognize" type="button" class = "button" value="Run BFS" onclick="Recognize(fig)"></input>
		<br/><br/><br/><br/>
		<input id="original" type="button" class = "button" value="Show Original" onclick="Original(fig)"></input>
		<br/><br/><br/><br/>
		<button id="refresh" type="button" class = "button" onclick="location.reload(true)"> Clear sketch </button>
	</div>
   </body>
 </html>

